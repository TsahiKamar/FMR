<html dir="rtl">
 
<mat-card class="example-card">
    <mat-card-header>
      <div mat-card-avatar class="example-header-image"></div>
      <mat-card-title>פרטי לקוח</mat-card-title>
      <mat-card-subtitle></mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>

      <section class="example-section">
      
      <form [formGroup]="form" (ngSubmit)="save()">
 
      
      <mat-form-field>
        <mat-label>שם לקוח</mat-label>
        <input matInput  id="fullName" formControlName="fullName" required>                
     </mat-form-field>

     
      <mat-form-field>
        <mat-label>תז</mat-label>
        <input matInput  id="customerId" formControlName="customerId" required>                
      </mat-form-field>
      
      <!-- כתובות -->
      <div class="row">
        <div class="col-xs-12" formArrayName="addresses">
          <div
          style="margin:5px;"
          class="row"
          *ngFor="let address of adddressControls;let i = index"
          [formGroupName]="i"
          >
            <div class="col-xs-8">
             <app-text-input formControlName="type" [label]='"סוג"'></app-text-input>
            </div>

            <div class="col-xs-8">
             <app-text-input formControlName="city" [label]='"עיר"'></app-text-input>
            </div>
            <div class="col-xs-2">
              <app-text-input formControlName="street" [label]='"רחוב"'></app-text-input>
            </div>

            <div class="col-xs-2">
                <app-text-input formControlName="zip" [label]='"מיקוד"'></app-text-input>
            </div>
            <div class="col-xs-2">
                <app-text-input formControlName="pob" [label]='"ת.ד."'></app-text-input>
            </div>
          </div>
          <hr>
        </div>
      </div>
      

      <!-- טלפונים -->

      <div class="row">
        <div class="col-xs-12" formArrayName="phones">
          <div
          style="margin:5px;"
          class="row"
          *ngFor="let phone of phonesControls;let i = index"
          [formGroupName]="i"
          >
            <div class="col-xs-8">
             <app-text-input formControlName="type" [label]='"סוג"'></app-text-input>
            </div>

            <div class="col-xs-8">
             <app-text-input formControlName="phoneNumber" [label]='"מספר טלפון"'></app-text-input>
            </div>

        </div>
          <hr>
        </div>
      </div>
      

     <!-- מוצרים -->
     <!--public customerId?: string;-->

 
      <div class="row">
        <div class="col-xs-12" formArrayName="products">
          <div
          style="margin:5px;"
          class="row"
          *ngFor="let product of productsControls;let i = index"
          [formGroupName]="i"
          >
            <div class="col-xs-8">
             <app-text-input formControlName="productId" [label]='"מזהה מוצר"'></app-text-input>
            </div>

            <div class="col-xs-8">
             <app-text-input formControlName="name" [label]='"שם"'></app-text-input>
            </div>
            <div class="col-xs-2">
              <app-text-input formControlName="description" [label]='"תיאור"'></app-text-input>
            </div>

            <div class="col-xs-2">
                <app-text-input formControlName="interestPercents" [label]='"אחוז ריבית"'></app-text-input>
            </div>
            <div class="col-xs-2">
                <app-text-input formControlName="deposit" [label]='"סכום הפקדה"'></app-text-input>
            </div>



            <div class="col-xs-2">
                <app-text-input formControlName="date" [label]='"ת. פתיחת הקופה"'></app-text-input>
            </div>
            <!--<div class="col-xs-2">
                <app-text-input formControlName="profit" [label]='"רווח"'></app-text-input>
            </div>-->

            

          </div>
          <hr>
        </div>
      </div>
      




    
      
      <br>
   
      <app-phones (save)="savePhone($event)"></app-phones>
      <app-address (save)="saveAddress($event)"></app-address>
      <app-product (save)="saveProduct($event)"></app-product>
   


      <button mat-button mat-flat-button type="submit" color="accent">שמור</button>
    
    <button mat-button mat-flat-button color="accent" (click)="edit()">עריכה</button>
    <!--<button mat-button mat-flat-button color="primary" (click)="profitCalc()">חשב רווח</button>-->

      

          
      </form>
      </section>
      
      </mat-card-content>
      <mat-card-actions>
      </mat-card-actions>
      </mat-card>
      
    
      


      <p>
        form :
        {{ form.value | json }}
      </p>


      
      
      
</html>
      
